<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  
    <meta name="description" content="A technology blog about a Year of Commits to Open Source projects.">
  

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      A Year of Commits &middot; 
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="http://jakeyesbeck.com/public/css/share.css">
  <link rel="stylesheet" href="http://jakeyesbeck.com/public/css/poole.css">
  <link rel="stylesheet" href="http://jakeyesbeck.com/public/css/syntax.css">
  <link rel="stylesheet" href="http://jakeyesbeck.com/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://jakeyesbeck.com/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="http://jakeyesbeck.com/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      <h2 class='h1'>
        <a href="http://jakeyesbeck.com">
          A Year of Commits
        </a>
      </h2>
      <p class="lead">The rantings of a man looking for inspiration. Embarking on a 365 day adventure of writing code. It might be funny or it might be sad, only time will tell.
</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="http://jakeyesbeck.com">Home</a>
      <a class="sidebar-nav-item" href="/archives">Archives</a>
      <a class="sidebar-nav-item" href="/about">About</a>
      <a class="sidebar-nav-item" href="https://github.com/yez">GitHub</a>
      <a class="sidebar-nav-item" href="https://twitter.com/jakeyesbeck">Twitter</a>
      <a class="sidebar-nav-item" href="/atom.xml">Feed</a>
    </nav>

    <p class='copyright'>&copy; 2015. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/2015/09/13/rescue-groups/">
        Rescue Groups Ruby Wrapper
      </a>
    </h1>

    

    <span class="post-date">13 Sep 2015</span>
    <span class='share-container'><ul class="share-buttons">
  <li>
    <a href="https://www.facebook.com/sharer/sharer.php?u=http://jakeyesbeck.com/2015/09/13/rescue-groups/&t=Rescue Groups Ruby Wrapper" title="Share on Facebook" target="_blank">
      <img src="http://jakeyesbeck.com/assets/images/facebook.svg">
    </a>
  </li>
  <li>
    <a href="https://twitter.com/intent/tweet?source=http%3A%2F%2Fjakeyesbeck.com&text=Rescue Groups Ruby Wrapper%20http://jakeyesbeck.com/2015/09/13/rescue-groups/&via=jakeyesbeck" target="_blank" title="Tweet">
      <img src="http://jakeyesbeck.com/assets/images/twitter.svg">
    </a>
  </li>
  <li>
    <a href="https://plus.google.com/share?url=http://jakeyesbeck.com/2015/09/13/rescue-groups/" target="_blank" title="Share on Google+">
      <img src="http://jakeyesbeck.com/assets/images/google_plus.svg">
    </a>
  </li>

  <li>
    <a href="https://news.ycombinator.com/submitlink?u=http://jakeyesbeck.com/2015/09/13/rescue-groups/&t=Rescue Groups Ruby Wrapper" target="_blank" title="Share on Hacker News">
      <img src="http://jakeyesbeck.com/assets/images/ycomb.svg">
    </a>
  </li>

  <li>
    <a href="https://getpocket.com/save?url=http://jakeyesbeck.com/2015/09/13/rescue-groups/&title=Rescue Groups Ruby Wrapper" target="_blank" title="Add to Pocket">
      <img src="http://jakeyesbeck.com/assets/images/pocket.svg">
    </a>
  </li>
  <li>
    <a href="http://www.reddit.com/submit?url=http://jakeyesbeck.com/2015/09/13/rescue-groups/&title=Rescue Groups Ruby Wrapper" target="_blank" title="Submit to Reddit">
      <img src="http://jakeyesbeck.com/assets/images/reddit.svg">
    </a>
  </li>
</ul>
</span>

    <p>People need companions. We are a social species that enjoys surrounding itself with family and friends. But sometimes, and maybe more often than just sometimes, people crave companionship from something that cannot talk back. This is probably one of the reasons so many people like pets. A pet cannot disagree with you or say judgmental remarks as you fill up that wine glass for a fourth time. No, a good pet will simply exist near you, occasionally asking for pets and food. Pets can be obtained from breeders for huge stacks of cash, or they can be adopted for significantly cheaper.</p>

<h2>The Adoption Option</h2>

<p>About 2.7 million animals are euthanized each year in animal shelters across the United States. That is some sad stuff right there. These animals could be hanging out with you at your house, clawing up the couch or barking at nothing. Does that not sound like just the best time? If only there was a Ruby library that some super awesome Software Artisans could use to make discoverable pet data a reality. Well now, there is! Over the past few months, as part of the <a href="http://jakeyesbeck.com/2015/04/23/a-year-of-commits/">Year of Commits</a> initiative, I have built a <a href="https://github.com/yez/rescue_groups">wrapper for the RescueGroups.org API</a>.</p>

<h2>0. Sign up for an API key</h2>

<p>The RescueGroups API is free to use, but requires signing up for an API key. To do that, fill out <a href="https://www.rescuegroups.org/services/request-an-api-key/">this form</a> and they will email you an API key for you to use.</p>

<h2>1. Install the <code>rescue_groups</code> Gem</h2>

<p>To install the gem, simply add <code>rescue_groups</code> to a ruby project&#39;s Gemfile:</p>

<p><strong>Gemfile</strong></p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">source</span> <span class="s1">&#39;rubygems&#39;</span>

<span class="n">gem</span> <span class="s1">&#39;rescue_groups&#39;</span>
</code></pre></div>
<p>Then in an initializer or at the beginning of the execution flow for using the library, add your new fancy API key to the configuration.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">RescueGroups</span><span class="o">.</span><span class="n">configuration</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="o">.</span><span class="n">apikey</span> <span class="o">=</span> <span class="s1">&#39;your api key&#39;</span>
<span class="k">end</span>
</code></pre></div>
<h2>2. Use the Gem!</h2>

<p>After the gem is installed, some handy dandy search functionality is right at your fingertips. Call me biased but I rather like the ActiveRecord <code>find</code> and <code>where</code> API. In fact, I like it so much that the <code>rescue_groups</code> gem implemented its own version of both.</p>

<h3>Searching</h3>

<p>If an ID is known for an animal, simply pass it to <code>find</code> and it will return an <code>Animal</code> object. If an <code>Array</code> is given to <code>find</code>, it will return an <code>Array</code> of <code>Animal</code>s.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Animal</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1">#=&gt; &lt;Animal id: 1, name: &#39;Fluffy&#39; ...&gt;</span>

<span class="no">Animal</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="o">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="o">]</span><span class="p">)</span>
<span class="c1">#=&gt; [&lt;Animal id: 20, name: &#39;Mittens&#39; ...&gt;, &lt;Animal id: 30, name: &#39;Mr. Doom&#39; ...&gt;, &lt;Animal id: 40, name: &#39;CatDog&#39; ...&gt;]</span>
</code></pre></div>
<p><code>Where</code> is very similar, any of the supported fields for <a href="https://github.com/yez/rescue_groups/blob/master/docs/animal_field.md">Animals</a>, <a href="https://github.com/yez/rescue_groups/blob/master/docs/organization_field.md">Organizations</a>, and <a href="https://github.com/yez/rescue_groups/blob/master/docs/event_field.md">Events</a> can be used to find the matching records.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Organization</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="nb">name</span><span class="p">:</span> <span class="s1">&#39;Pets-R-Us&#39;</span><span class="p">)</span>
<span class="c1"># =&gt; [&lt;Organization id: 1, name: &#39;Pets-R-Us&#39; ...&gt;]</span>

<span class="no">Animal</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="ss">color</span><span class="p">:</span> <span class="o">[</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="o">]</span><span class="p">)</span>
<span class="c1"># =&gt; [&lt;Animal id: 1, color: &#39;black&#39; ..&gt;, &lt;Animal id: 5, color: &#39;brown&#39; ..&gt;]</span>

<span class="no">Animal</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="ss">location_postal_code</span><span class="p">:</span> <span class="mi">94117</span><span class="p">)</span>
</code></pre></div>
<p>The default behavior asserts that the fields are equal, i.e. An animal that is brown will be returned when <code>Animal.where(color: &#39;brown&#39;)</code> is used. Other comparisons are possible for more complex queries.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Animal</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="ss">general_age</span><span class="p">:</span> <span class="p">{</span> <span class="ss">less_than</span><span class="p">:</span> <span class="mi">5</span><span class="p">})</span>
<span class="c1"># =&gt; [&lt;Animal id: 1, age: 2 ..&gt;, &lt;Animal id: 3, age: 1 ..&gt;]</span>

<span class="no">Organization</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="nb">name</span><span class="p">:</span> <span class="p">{</span> <span class="ss">contains</span><span class="p">:</span> <span class="s1">&#39;shelter&#39;</span><span class="p">},</span> <span class="ss">location</span><span class="p">:</span> <span class="mi">90210</span><span class="p">)</span>
<span class="c1"># =&gt; [&lt;Organization id: 1, name: &#39;Big Animal Shelter&#39;, location: 90210 ...&gt;, &lt;Organization id: 2, name: &#39;Small Animal Shelter&#39;, location: 90210 ...&gt;,]</span>
</code></pre></div>
<h2>Relationships</h2>

<p>While I was in the spirit of borrowing, I did so with Ruby on Rails style relationships. In the <code>rescue_groups</code> gem Animals and Events <code>belongs_to</code> Organizations and, inversely, Organizations <code>has_many</code> Animals and Events. When one of these models&#39; relationship is called, the respective relationship is automagically fetched from the RescueGroups.org API.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">organization</span> <span class="o">=</span> <span class="no">Organization</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># =&gt; &lt;Organization id: 1, name: &#39;Pets&#39;, city: &#39;Dallas&#39; ...&gt;</span>

<span class="c1"># This will issue a remote call that is equivalent to Animal.where(organization_id: 1)</span>
<span class="n">organization</span><span class="o">.</span><span class="n">animals</span>
<span class="c1"># =&gt; [&lt;Animal id: 1, organization_id: 1 ...&gt;, &lt;Animal id: 2, organization_id: 1 ...&gt;, ...]</span>
</code></pre></div>
<h2>3. Make a Pet Project</h2>

<p>Now with all this pet data available, put it to work. I have really enjoyed making this library but am always looking for feedback. If anyone would like to know more or help contribute to this project please feel free! Github PRs and issues are always welcome.</p>

  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="http://jakeyesbeck.com/page13">Older</a>
  
  
    
      <a class="pagination-item newer" href="http://jakeyesbeck.com/page11">Newer</a>
    
  
</div>

    </div>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62292380-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>
